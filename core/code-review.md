# Code Review

コードレビューの観点とチェックリストに関する共通ルールです。

## 概要

このルールは、コードレビューの観点、チェックリスト、レビュープロセスを定義します。品質の高いコードを維持するための基本原則です。

## 基本原則

### 1. コードレビューの目的

**コードレビューの主な目的**:
- **品質の確保**: バグの早期発見と修正
- **知識の共有**: チーム内での知識共有
- **一貫性の維持**: コーディング規約の遵守
- **セキュリティの確保**: セキュリティ問題の早期発見

### 2. レビューの観点

**機能性**:
- 要件を満たしているか
- エッジケースが適切に処理されているか
- エラーハンドリングが適切か

**コード品質**:
- コードが読みやすく、理解しやすいか
- 適切な命名規則が使用されているか
- 重複コードがないか
- 適切な抽象化がされているか

**パフォーマンス**:
- パフォーマンスの問題がないか
- 不要な処理がないか
- 適切なデータ構造が使用されているか

**セキュリティ**:
- セキュリティの問題がないか
- 入力値の検証が適切か
- 機密情報が適切に管理されているか

**テスト**:
- 適切なテストが追加されているか
- テストカバレッジが十分か
- テストが適切に実装されているか

### 3. レビューチェックリスト

**必須チェック項目**:
- [ ] コードが要件を満たしているか
- [ ] エラーハンドリングが適切か
- [ ] テストが追加されているか
- [ ] セキュリティの問題がないか
- [ ] パフォーマンスの問題がないか
- [ ] コードが読みやすく、理解しやすいか
- [ ] 適切な命名規則が使用されているか
- [ ] ドキュメントが更新されているか（必要に応じて）

**推奨チェック項目**:
- [ ] コメントが適切に追加されているか
- [ ] 重複コードがないか
- [ ] 適切な抽象化がされているか
- [ ] 既存のコードスタイルに一致しているか

## 具体的な指針

### レビューの実施方法

**レビューの手順**:
1. **概要の確認**: PRの概要と変更内容を確認
2. **コードの確認**: 変更されたコードを確認
3. **テストの確認**: テストが適切に追加されているか確認
4. **動作確認**: ローカル環境で動作確認（可能な場合）
5. **フィードバック**: 改善点をフィードバック

**レビューコメントの書き方**:
- **建設的**: 批判的ではなく、建設的なフィードバック
- **具体的**: 抽象的な指摘ではなく、具体的な改善案
- **丁寧**: 礼儀正しく、尊重する態度

### レビューコメントの例

**良いレビューコメント**:
```markdown
この関数は複数の責務を持っているようです。
`validateUser`と`saveUser`を分離することで、
テストが容易になり、保守性も向上します。

例:
- `validateUser(user: User): ValidationResult`
- `saveUser(user: User): Promise<User>`
```

**悪いレビューコメント**:
```markdown
このコードは良くない。
```

### 承認基準

**承認の条件**:
- すべての必須チェック項目が満たされている
- 重要な問題がない
- テストが適切に追加されている
- セキュリティの問題がない

**承認のタイミング**:
- すべてのレビューコメントに対応済み
- 追加のテストが完了している
- 動作確認が完了している

## 例外・特別なケース

### 緊急の修正

緊急の修正が必要な場合:
- 最小限の変更に留める
- 後でリファクタリングを実施
- レビューは簡略化しても良い

### 大規模な変更

大規模な変更の場合:
- 複数のPRに分割
- 段階的なレビュー
- 設計レビューを事前に実施

## 参考リンク

- [Google Code Review Guidelines](https://google.github.io/eng-practices/review/)
- [Code Review Best Practices](https://github.com/google/eng-practices/blob/master/review/README.md)

